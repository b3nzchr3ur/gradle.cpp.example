apply plugin : 'cpp'

model {
  toolChains {
        /* TODO: Visual Studio does not work. 
         *mainlib.lib is generated, and mainlib.dll is wanted. 
        visualCpp(VisualCpp) {
	}
        */
	
	gcc(Gcc) {
	}
  }
}

/*
binaries.all {
	if(toolChain in VisualCpp) {
		cppCompiler.args "/EHsc"
		cppCompiler.define "DLL_EXPORT"
	}
}
*/

libraries { 
	gtest { }
	mainlib { }
}

sources {
	mainlib { }

	test { 
		cpp {
			lib libraries.mainlib
			lib libraries.gtest
		}
	} 

	main {
		cpp {
			lib libraries.mainlib
		}
	}

}

executables {
	test { }
	main { }
}
